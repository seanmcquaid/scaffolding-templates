# TypeScript Library Template - Agent Instructions

The role of this file is to describe common mistakes and confusion points that agents might encounter as they work in this project. If you ever encounter something like this in the project, please alert the developer working with you and indicate this is the case in the AGENTS.md file to help prevent future agents from having the same issue.

## Commands

```bash
# Install dependencies
pnpm install

# Build the library (generates dist/)
pnpm build

# Run unit tests
pnpm test

# Run tests in watch mode
pnpm test:watch

# Run tests with coverage
pnpm test:coverage

# Run linting
pnpm lint

# Fix lint errors
pnpm lint:fix

# Type checking (via build)
pnpm build

# Check bundle size
pnpm bundlesize

# Check tree-shaking
pnpm check-treeshaking

# Check package exports and types
pnpm check-types
```

## Common Mistakes and Confusion Points

### 1. Dual ESM/CJS Exports
- This library is built with `tsdown` and exports both ESM and CJS formats. The `package.json` `exports` field maps entry points to both formats. When adding new entry points, update both the source and the `exports` field in `package.json`. Failing to do so will break consumers using one of the module formats.

### 2. No React / No Browser APIs
- This is a **framework-agnostic TypeScript library**. Do not add React, DOM APIs, or browser-specific code unless explicitly intended as a browser-only utility. Keep dependencies minimal.

### 3. `dist/` is Generated
- The `dist/` directory is generated by `pnpm build` and should not be edited manually or committed. It is in `.gitignore`. If you see `dist/` in your working tree, it was generated locally â€” do not stage it.

### 4. Publishing with Changesets
- Version bumps and publishing use **Changesets**. Do not manually edit the `version` field in `package.json`. Run `pnpm changeset` to create a changeset file, then let the CI workflow handle the version bump and publish.

### 5. Package Manager
- Use **`pnpm`** only. Do not use `npm install` or `yarn add`.

### 6. TypeScript Strict Mode
- The library uses strict TypeScript. Avoid `any` types and ensure all exported APIs are fully typed. Type exports are part of the public API surface.
